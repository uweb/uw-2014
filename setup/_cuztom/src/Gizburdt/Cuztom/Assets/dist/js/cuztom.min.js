jQuery.noConflict(); jQuery(function($) { var doc = $(document); 
var cuztomUI;(cuztomUI=function(t){var t=$(t);$(".js-cuztom-datepicker",t).map(function(){return $(this).datetimepicker({scrollInput:!1,timepicker:!1,format:$(this).data("date-format")})}),$(".js-cuztom-timepicker",t).map(function(){return $(this).datetimepicker({scrollInput:!1,datepicker:!1,format:$(this).attr("data-time-format")})}),$(".js-cuztom-datetimepicker",t).map(function(){return $(this).datetimepicker({scrollInput:!1,format:$(this).data("date-format")+" "+$(this).data("time-format")})}),$(".js-cuztom-colorpicker",t).wpColorPicker(),$(".js-cuztom-tabs",t).tabs(),$(".js-cuztom-slider",t).slider(),$(".js-cuztom-accordion",t).accordion(),$(".js-cuztom-sortable",t).sortable({handle:".cuztom-handle-sortable a"})})(document);
doc.on("click",".js-cuztom-add-sortable",function(t){var e=$(this),o=e.closest(".js-cuztom"),s=o.data("box-id"),a=e.data("sortable-type");if("repeatable"==a)var c=e.closest(".js-cuztom-field"),d=c.find(".js-cuztom-counter"),i="cuztom_add_repeatable_item";else var n=e.closest(".js-cuztom-control"),u=n.data("control-for"),d=n.find(".js-cuztom-counter"),c=$('.js-cuztom-field[data-id="'+u+'"]'),i="cuztom_add_bundle_item";var l=c.find(".js-cuztom-sortable"),r=d.find(".js-current"),m=(d.find(".js-max"),l.find(".js-cuztom-sortable-item").length),f=m,j=Cuztom.ajax_url,z={action:i,cuztom:{box:s,field:e.data("field-id"),count:m,index:f}};$.post(j,z,function(t){var t=$.parseJSON(t);t.status?(l.append(t.item),r.text(m+1)):alert(t.message),cuztomUI(document)}),t.preventDefault()}),doc.on("click",".js-cuztom-remove-sortable",function(t){var e=$(this),o=e.closest(".js-cuztom"),s=(o.data("box-id"),e.closest(".js-cuztom-sortable-item")),a=e.closest(".js-cuztom-field"),c=a.find(".js-cuztom-sortable"),d=(e.data("sortable-type"),a.find(".js-cuztom-counter")),i=d.find(".js-current"),n=(d.find(".js-max"),c.find(".js-cuztom-sortable-item").length);s.remove(),i.text(n-1),t.preventDefault()});
doc.on("click",".js-cuztom-remove-media",function(e){var t=$(this).hide(),a=t.closest(".js-cuztom-field");a.find(".cuztom-preview").html(""),a.find(".cuztom-input-hidden").val(""),e.preventDefault()}),doc.on("click",".js-cuztom-upload",function(e){var t,a=$(this),i=a.attr("data-media-type")||"image",m=a.closest(".js-cuztom-field"),n=m.find(".cuztom-input-hidden"),o=m.find(".cuztom-preview"),s="medium";return void 0!==t?void t.open():(t=wp.media.frames.file_frame=wp.media({multiple:!1,type:i}),t.on("select",function(){if(attachment=t.state().get("selection").first().toJSON(),m.find(".js-cuztom-remove-media").remove(),"image"==i){var e=s&&!$.isArray(s)&&attachment.sizes[s]?attachment.sizes[s]:attachment.sizes.medium?attachment.sizes.medium:attachment.sizes.full;$.isArray(s)&&(parseInt(s[0])>0&&(e.width=parseInt(s[0])),parseInt(s[1])>0&&(e.height=parseInt(s[1]))),a.after('<a href="#" class="button button-small cuztom-remove-media js-cuztom-remove-media" tabindex="-1" title="Remove current image">x</a>'),o.html('<img src="'+e.url+'" height="'+e.height+'" width="'+e.width+'" />')}else a.after('<a href="#" class="button button-small cuztom-remove-media js-cuztom-remove-media" tabindex="-1" title="Remove current file">x</a>'),o.html('<span class="cuztom-mime mime-application-pdf"><a href="'+attachment.url+'">'+attachment.title+"</a></span>");n.val(attachment.id)}),t.open(),void e.preventDefault())});
doc.on("click",".js-cuztom-ajax-save",function(t){var o=$(this),a=o.closest(".js-cuztom"),e=o.closest(".js-cuztom-field"),c=e.attr("data-id"),i=a.attr("data-box-id"),d=a.attr("data-object-id"),r=a.data("meta-type"),s=e.find(".cuztom-input"),l=s.val(),u={action:"cuztom_save_field",cuztom:{value:l,box:i,field_id:c,meta_type:r,object_id:d}};console.log(s),$.post(Cuztom.ajax_url,u,function(t){var t=$.parseJSON(t),o=s.css("border-color");t.status&&s.animate({borderColor:"#60b334"},1200,function(){s.animate({borderColor:o})})}),t.preventDefault()}); });